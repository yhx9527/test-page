<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="Content-Security-Policy" content="frame-src 'self' https://www.dropbox.com;">
  <title>Document</title>
  <script type="text/javascript" src="https://www.dropbox.com/static/api/2/dropins.js" id="dropboxjs" data-app-key="1ncfwbdqatpdz81"></script>
</head>
<body>
  <div>ddddddd</div>
  <div id="container"></div>
  <div id="frame"></div>
  <script>
    var options = {
      // Required. Called when a user selects an item in the Chooser.
      success: function(files) {
          console.log("hhhhhhh", files);
      },
      // Optional. Called when the user closes the dialog without selecting a file
      // and does not include any parameters.
      cancel: function() {

      },
      // Optional. "preview" (default) is a preview link to the document for sharing,
      // "direct" is an expiring link to download the contents of the file. For more
      // information about link types, see Link types below.
      linkType: "preview", // or "direct"
      // Optional. A value of false (default) limits selection to a single file, while
      // true enables multiple file selection.
      multiselect: false, // or true
      // Optional. This is a list of file extensions. If specified, the user will
      // only be able to select files with these extensions. You may also specify
      // file types, such as "video" or "images" in the list. For more information,
      // see File types below. By default, all extensions are allowed.
      extensions: ['.pdf', '.doc', '.docx', ".png", ".svg", "pptx"],
      // Optional. A value of false (default) limits selection to files,
      // while true allows the user to select both folders and files.
      // You cannot specify `linkType: "direct"` when using `folderselect: true`.
      folderselect: false, // or true
      iframe: false,
      trigger: "js",
    };
    // Dropbox.choose(options);
    var button = Dropbox.createChooseButton(options);
    // var box = document.getElementById("container");
    // var a = Dropbox.createChooserWidget(options);
    // console.log("ddddd", a);
    document.getElementById("container").appendChild(button);

    var box = document.getElementById("frame");
    var options = {
      // Shared link to Dropbox file
      link: "https://www.dropbox.com/scl/fi/2i7sqvd51tu4yelalri2f/test-g.png?rlkey=eppkj4yoo2hy3h5nys4aki0j0&st=4bm1aywx&dl=0",
      file: {
        // Sets the zoom mode for embedded files. Defaults to 'best'.
        zoom: "best" // or "fit"
      },
      folder: {
        // Sets the view mode for embedded folders. Defaults to 'list'.
        view: "list", // or "grid"
        headerSize: "normal" // or "small"
      }
    }
    Dropbox.embed(options, box);

    const comp = new Dropbox.Chooser({
      appKey: "1ncfwbdqatpdz81",
      onSuccess: (e, t) => {
        console.log("dddddd", e, t)
      },
      onCancel: (a) => {
        console.log("hhhhhh", a)
      },
      linkType: "preview",
    })
    //var a = Dropbox.mount(comp, document.getElementById("container"));
    window.test = () => {
       Dropbox.unmount(comp);
       console.log("uuuuuuuu")
    }
  </script>
</body>
</html>
